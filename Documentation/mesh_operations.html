<html>
    <head>
      <title>OpenMesh: Some basic operations: Flipping and collapsing edges</title>
      <link href="acg_style.css" rel="stylesheet" text="text/css">
      <link href="acg_tabs.css" rel="stylesheet" type="text/css">
    </head>
    <body bgcolor="#003010">
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="main.html">OpenMesh Documentation</a>      </li>
      <li><a class="el" href="mesh_docu.html">Using and understanding OpenMesh</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Some basic operations: Flipping and collapsing edges </h1>  </div>
</div>
<div class="contents">
<p>In this section you will learn about some basic operations on a mes that OpenMesh already provides.</p>
<p>Comprising the flipping of edges in a triangle mesh as well as collapsing edges by joining the two adjacent vertices.</p>
<ul>
<li><a class="el" href="mesh_operations.html#op_flip">Flipping edges in triangle meshes</a> </li>
<li><a class="el" href="mesh_operations.html#op_collapse">Collapsing edges</a></li>
</ul>
<h2><a class="anchor" id="op_flip"></a>
Flipping edges in triangle meshes</h2>
<p>Considering two adjacent faces of a triangle mesh, there exist exactly two different configurations of the inner edge. Calling the function <a class="el" href="classOpenMesh_1_1TriConnectivity.html#a03b3c3be3c52a194789bd541d24f4c09" title="Flip edge _eh.">OpenMesh::TriConnectivity::flip(EdgeHandle _eh)</a> will flip the specified edge to its opposite orientation as shown in the illustration below.</p>
<div align="center">
<img src="mesh.flip.png" alt="mesh.flip.png"/>
<p><strong>Flipping edges in a triangle mesh</strong></p></div>
<p> So, the following snippet of code shows how to use this in your applications:</p>
<div class="fragment"><pre class="fragment">TriMesh mesh;

<span class="comment">// Add some vertices</span>
TriMesh::VertexHandle vhandle[4];

vhandle[0] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(0, 0, 0));
vhandle[1] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(0, 1, 0));
vhandle[2] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(1, 1, 0));
vhandle[3] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(1, 0, 0));

<span class="comment">// Add two faces</span>
std::vector&lt;TriMesh::VertexHandle&gt; face_vhandles;

face_vhandles.push_back(vhandle[2]);
face_vhandles.push_back(vhandle[1]);
face_vhandles.push_back(vhandle[0]);
mesh.add_face(face_vhandles);

face_vhandles.clear();

face_vhandles.push_back(vhandle[2]);
face_vhandles.push_back(vhandle[0]);
face_vhandles.push_back(vhandle[3]);
mesh.add_face(face_vhandles);

<span class="comment">// Now the edge adjacent to the two faces connects</span>
<span class="comment">// vertex vhandle[0] and vhandle[2].</span>

<span class="comment">// Find this edge and then flip it</span>
<span class="keywordflow">for</span>(TriMesh::EdgeIter it = mesh.edges_begin(); it != mesh.edges_end(); ++it) {

        <span class="keywordflow">if</span>(!mesh.is_boundary(it.handle())) {
                <span class="comment">// Flip edge</span>
                mesh.flip(it.handle());
        }
}

<span class="comment">// The edge now connects vertex vhandle[1] and vhandle[3].</span>
</pre></div><h2><a class="anchor" id="op_collapse"></a>
Collapsing edges</h2>
<p>In this section you will learn how to collapse edges such that the two adjacent vertices join. OpenMesh provides the function <a class="el" href="classOpenMesh_1_1PolyConnectivity.html#a5afce0f6be1f425f5e0d42441fee35df" title="Halfedge collapse: collapse the from-vertex of halfedge _heh into its to-vertex.">OpenMesh::PolyConnectivity::collapse(HalfedgeHandle _heh)</a> to perform this operation. This will collapse the from-vertex (remeber that halfedges are directed) to the to-vertex of the halfedge as illustrated below. Note that collapsing edges might cause topological inconsistencies to your mesh. You should verify consistency after collapsing edges by calling OpenMesh::PolyConnectivity::is_collapse_ok().</p>
<div align="center">
<img src="mesh.collapse.png" alt="mesh.collapse.png"/>
<p><strong>Collapsing will always be performed in the direction the halfedge points to.</strong></p></div>
<p> A simple code example related to the illustration might look like this:</p>
<div class="fragment"><pre class="fragment">PolyMesh mesh;

<span class="comment">// Add some vertices as in the illustration above</span>
PolyMesh::VertexHandle vhandle[7];

vhandle[0] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(-1, 1, 0));
vhandle[1] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(-1, 3, 0));
vhandle[2] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(0, 0, 0));
vhandle[3] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(0, 2, 0));
vhandle[4] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(0, 4, 0));
vhandle[5] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(1, 1, 0));
vhandle[6] = mesh.add_vertex(<a class="code" href="classOpenMesh_1_1PolyMeshT.html#aed10fb4dfb536b53a5e20c8f2442eadf" title="Coordinate type.">MyMesh::Point</a>(1, 3, 0));

<span class="comment">// Add three quad faces</span>
std::vector&lt;PolyMesh::VertexHandle&gt; face_vhandles;

face_vhandles.push_back(vhandle[1]);
face_vhandles.push_back(vhandle[0]);
face_vhandles.push_back(vhandle[2]);
face_vhandles.push_back(vhandle[3]);
mesh.add_face(face_vhandles);

face_vhandles.clear();

face_vhandles.push_back(vhandle[1]);
face_vhandles.push_back(vhandle[3]);
face_vhandles.push_back(vhandle[5]);
face_vhandles.push_back(vhandle[4]);
mesh.add_face(face_vhandles);

face_vhandles.clear();

face_vhandles.push_back(vhandle[3]);
face_vhandles.push_back(vhandle[2]);
face_vhandles.push_back(vhandle[6]);
face_vhandles.push_back(vhandle[5]);
mesh.add_face(face_vhandles);

<span class="comment">// Now find the edge between vertex vhandle[2]</span>
<span class="comment">// and vhandle[3]</span>
<span class="keywordflow">for</span>(PolyMesh::HalfedgeIter it = mesh.halfedges_begin(); it != mesh.halfedges_end(); ++it) {

        <span class="keywordflow">if</span>(to_vertex_handle(it.handle()) == vhandle[3] &amp;&amp;
           from_vertex_handle(it.handle()) == vhandle[2]) {

                <span class="comment">// Collapse edge</span>
                mesh.collapse(it.handle());
                <span class="keywordflow">break</span>;
        }
}

<span class="comment">// Our mesh now looks like in the illustration above after the collapsing.</span>
</pre></div> </div>
<hr>
<address>
<small>
<a href="http://www.rwth-graphics.de" style="text-decoration:none;">
<img src="acg_icon.gif" alt="acg pic" align="middle" border=0>
</a>
Project <b>OpenMesh</b>, 
&copy;&nbsp; Computer Graphics Group, RWTH Aachen.
Documentation generated using 
<a class="el" href="http://www.doxygen.org/index.html">
<b>doxygen</b>
</a>.
</small>
</address>
</body>
</html>
